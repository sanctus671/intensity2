<ion-header>
    <ion-toolbar color="primary">
        <ion-title>
            Select Exercise
        </ion-title>
        <ion-buttons start>
            <button ion-button (click)="dismiss()">
                <span ion-text showWhen="ios">Cancel</span>
                <ion-icon name="md-close" showWhen="android, windows"></ion-icon>
            </button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>



<ion-content>
    
    
    <ion-searchbar
        [(ngModel)]="properties.search"
        [showCancelButton]="shouldShowCancel"
        (ionInput)="searchStarted()"
        (ionCancel)="searchCancelled()"
        placeholder="Search Exercises"
        class="flat-search">
    </ion-searchbar>   
    
    <ion-segment color="primary" [(ngModel)]="properties.activeTab">      
        <ion-segment-button value="recent">
            Recent
        </ion-segment-button>
        <ion-segment-button value="all">
            All Exercises
        </ion-segment-button> 
    </ion-segment>    
    

    
    <ion-list class="add-diary-list" *ngIf="properties.activeTab === 'recent'">
        <button ion-item detail-none *ngFor="let exercise of recentExercises | exerciseSearch:properties.search; let i = index" (click)="addExercise(exercise)">
            {{exercise.name}}
            <ion-icon name='more' item-end (click)="openViewDetails($event, exercise)"></ion-icon>
        </button> 
    </ion-list>
    

    
    
    <ion-list class="add-diary-list" *ngIf="properties.activeTab === 'all' && properties.search">
        <button ion-item detail-none *ngFor="let exercise of exercises | exerciseSearch:properties.search | slice:0:30; let l = count; let i = index" (click)="addExercise(exercise)">
            {{exercise.name}}
            <ion-icon name='more' item-end (click)="openViewDetails($event, exercise)"></ion-icon>
        </button> 
        <ion-item class="create-exercise" detail-none>
            Can't find {{properties.search}}?<br> 
            <button type="submit" ion-button (click)="createExercise(properties.search)">Create It</button>
        </ion-item>                
    </ion-list>  
    
    
    
    <ion-list class="add-diary-list" *ngIf="properties.activeTab === 'all' && !properties.search">
        <button ion-item detail-none *ngFor="let exercise of exercises | slice:0:properties.allCount; let i = index" (click)="addExercise(exercise)">
            {{exercise.name}}
            <ion-icon name='more' item-end (click)="openViewDetails($event, exercise)"></ion-icon>
        </button> 
        <button class="more-exercises" ion-item detail-none (click)="properties.allCount = properties.allCount + 100">
                + {{exercises.length - properties.allCount}} more
        </button>         
    </ion-list>     
    

    
</ion-content>