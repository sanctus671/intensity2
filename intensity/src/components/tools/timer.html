<ion-header>
    <ion-toolbar color="primary">
        <ion-title>
            Timer
        </ion-title>
        <ion-buttons start>
            <button ion-button (click)="dismiss()">
                <span ion-text showWhen="ios">Cancel</span>
                <ion-icon name="md-close" showWhen="android, windows"></ion-icon>
            </button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>



<ion-content>
    
    
    <ion-segment [(ngModel)]="properties.activeTab">
        <ion-segment-button value="stopwatch">
            Stopwatch
        </ion-segment-button>
        <ion-segment-button value="timer">
            Countdown
        </ion-segment-button>
    </ion-segment>    
    
    <div *ngIf="properties.activeTab === 'stopwatch'" >
        <div class="stopwatch timer" (click)="toggleStopwatch()" [ngClass]="{'timer-stopped':!properties.stopwatchStarted && !properties.stopwatchInitialStart && stopwatchNotZero()}">
            <div class="time">{{getStopwatchTime()}}</div>
            <a class="timer-actions">
                <ion-icon name="play"  *ngIf="!properties.stopwatchStarted"></ion-icon>
                <ion-icon name="pause" *ngIf="properties.stopwatchStarted"></ion-icon>
            </a>
        </div>
        
        <div class="timer-extra-actions">
            <button color="primary" ion-button (click)="resetStopwatch()">Reset </button>
        </div>
    </div>
    
    
    <div *ngIf="properties.activeTab === 'timer'">

        <div class="stopwatch timer" (click)="toggleTimer()" [ngClass]="{'timer-stopped':!properties.timerStarted && !properties.timerInitialStart}">
            <div class="time">{{getTimerTime()}}</div>
            <a class="timer-actions">
                <ion-icon name="play"  [hidden]="properties.timerStarted"></ion-icon>
                <ion-icon name="pause" [hidden]="!properties.timerStarted"></ion-icon>
            </a>
        </div>
        
        <div class="timer-extra-actions">
            <button color="primary" ion-button (click)="resetTimer()">Reset </button>
            

        </div>        
        
        <ion-list class="timer-options" (click)="showMore = !showMore">
            <ion-list-header>
                Timer Options
                <ion-icon [name]="showMore ? 'md-arrow-dropup' :'md-arrow-dropdown'" item-end></ion-icon>
            </ion-list-header>
            <ion-item-group *ngIf="showMore">
                <ion-item>
                    <ion-label>Countdown From</ion-label>
                    <ion-datetime displayFormat="mm:ss" [(ngModel)]="timerOptions.timeRaw" (ionChange)="updateTimerProperties()"></ion-datetime>
                </ion-item>            
                <ion-item>
                    <ion-label>Play Sound At 0</ion-label>
                    <ion-checkbox [(ngModel)]="timerOptions.playSound" (ionChange)="updateTimerProperties()"></ion-checkbox>   
                </ion-item>            
                <ion-item>
                    <ion-label>Repeat</ion-label>
                    <ion-checkbox [(ngModel)]="timerOptions.repeat" (ionChange)="updateTimerProperties()"></ion-checkbox>   
                </ion-item>     
            </ion-item-group>        
        </ion-list>   
    </div>
    
</ion-content>